# GeoCalculator — проверка формул и вердикт

## Проверка соответствия геодезическим формулам

### 1. Угловые невязки (СКП, истинные ошибки)

| Формула | Стандарт | В приложении | Вердикт |
|--------|----------|--------------|---------|
| СКП при истинных ошибках | m = √([Δ²]/n) | m = √(Σx²/n) | ✅ Корректно |
| Точность СКП | m_m = m/√(2n) | То же | ✅ Корректно |
| Предельная Δ_пред | t·m (t=3) | 3m | ✅ Корректно |
| Проверка свойств (симметрия, ограниченность) | Учебные критерии | Реализованы | ✅ |

**Примечание:** Ввод трактуется как набор истинных ошибок (или невязок с ожидаемым нулевым средним). Для выборки «уклонений от среднего» в учебниках также дают m = √([v²]/(n−1)); в приложении используется формула для истинных ошибок — это нормально для типовых задач по СКП.

---

### 2. Нивелирный ход

| Формула | Стандарт | В приложении | Вердикт |
|--------|----------|--------------|---------|
| Невязка | f_h = [h] − (H_B − H_A) | fh = sumH − (HB − HA) | ✅ Корректно |
| Допуск | f_доп = k√L мм, k=5(III), 10(IV), 50(техн.) | fdop = k·√(sumD), L в км | ✅ Корректно |
| Поправка в превышение | δh_i = −f_h·d_i/[d] | corr = −fh·d/sumD | ✅ Корректно |
| Уравненные превышения и отметки | h_исп = h_i + δh_i, H_i = H_{i−1} + h_исп | Реализовано | ✅ |

---

### 3. Теодолитный ход

| Формула | Стандарт | В приложении | Вердикт |
|--------|----------|--------------|---------|
| Теоретическая сумма углов | Σβ_т = α_нач − α_кон + n·180° (правые углы) | thSum = a0 − an + n*180 | ✅ Корректно |
| Угловая невязка | f_β = Σβ_изм − Σβ_т | fb (в минутах) = (sumB − thSum)·60 | ✅ Исправлено: невязка и допуск в минутах |
| Допуск | f_β доп = ±1′√n | fdop = √n (минуты) | ✅ Корректно |
| Поправка в углы | −f_β/n на каждый угол | dBDeg = −fbDeg/n | ✅ Корректно |
| Дирекционные углы | α_i = α_{i−1} − β_исп + 180° | То же | ✅ Корректно |
| Приращения | ΔX = d·cos α, ΔY = d·sin α | Реализовано | ✅ |
| Линейная невязка | f_x, f_y, f_s = √(f_x² + f_y²) | Реализовано | ✅ |
| Поправки в приращения | пропорционально стороне | c_xi = −f_x·d_i/[d] | ✅ |
| Координаты | X_i, Y_i по уравненным приращениям | Реализовано | ✅ |

**Исправление:** Углы вводятся в градусах, допуск — 1′√n (минуты). В коде невязка переводится в минуты (fb = fbDeg·60), сравнение и вывод f_β выполняются в минутах.

---

### 4. Прямая геодезическая задача

| Формула | В приложении | Вердикт |
|--------|----------------|---------|
| X₂ = X₁ + d·cos α, Y₂ = Y₁ + d·sin α | Реализовано, α в градусах | ✅ Корректно |

---

### 5. Обратная геодезическая задача

| Формула | В приложении | Вердикт |
|--------|----------------|---------|
| d = √(ΔX² + ΔY²) | dist = √(dx² + dy²) | ✅ Корректно |
| α = atan2(ΔY, ΔX), вывод в ° ′ ″ | Реализовано | ✅ Корректно |

---

### 6. Вероятности и нормальное распределение

| Формула | В приложении | Вердикт |
|--------|----------------|---------|
| P(\|Δ\| < kσ) = 2Φ(k) − 1 = erf(k/√2) | 2·phi(k), ряд для Φ | ✅ Корректно |
| Предельная погрешность Δ_пр = t·m (t=2 или t=3 по методичке) | Реализовано, выбор t | ✅ Корректно |
| Таблица Лапласа Φ(x) | Таблица по той же phi(x) | ✅ Корректно |

---

### 7. Взвешенные измерения

| Формула | Стандарт | В приложении | Вердикт |
|--------|----------|--------------|---------|
| Среднее весовое | x̄ = [pl]/[p] | mean = spl/sp | ✅ Корректно |
| СКП единицы веса | μ = √([pv²]/([p]−1)) | mu = √(spv2/(sp−1)) | ✅ Корректно |
| СКП среднего | m_x̄ = μ/√[p] | mx = mu/√(sp) | ✅ Корректно |

---

## Соответствие стандартам

- **Формулы:** соответствуют учебным и нормативным (нивелирование III/IV/техн., теодолитные ходы, СКП, веса).
- **Единицы:** секунды для невязок угловых, мм для невязки нивелирования, минуты для допуска и невязки в теодолитном ходе, метры для координат и длин — учтены и исправлены там, где было несоответствие (теодолит).
- **Справочник формул** в разделе «Формулы» совпадает с используемой в расчётах терминологией и может служить шпаргалкой.

---

## Полезность для студентов

| Критерий | Оценка | Комментарий |
|----------|--------|-------------|
| Соответствие программе | Высокая | Закрывает типовые темы: СКП, нивелирный ход, теодолитный ход, прямая/обратная задачи, веса, нормальное распределение. |
| Наглядность | Высокая | Пошаговый вывод, таблицы, проверка свойств невязок, гистограмма, примеры. |
| Самопроверка | Высокая | Можно быстро проверить ручной расчёт или сравнить с одногруппниками. |
| Мобильность | Высокая | Удобно на практиках и на экзамене (если разрешены калькуляторы/телефоны). |
| Ограничения | Средние | Нет экспорта в Word/PDF, нет сохранения вариантов; углы только правые (для левых нужна адаптация формул в голове). |

**Итог:** Приложение соответствует геодезическим формулам и стандартам, после исправления единиц в теодолитном ходе расчёты корректны. Для студентов полезно как тренажёр и проверка домашних/контрольных работ. Краткие подсказки по вводу добавлены во все разделы (единицы, формат, правые углы в градусах и т.д.). При необходимости можно добавить экспорт результатов.
